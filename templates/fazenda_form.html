{% extends 'layout.html' %}
{% block title %}Cadastro Fazenda {% endblock %}
{% block titulo_pagina %}Cadastro fazenda {% endblock %}

{% block content %}
<div class="container mt-4">
  
  <form method="POST" action="/fazenda">
    <div class="row g-3">
      <div class="col-md-3">
        <label class="form-label">Nome</label>
        <input type="text" name="nome" class="form-control" required>
      </div>
      <div class="col-md-3">
        <label class="form-label">Grupo</label>
        <input type="text" name="grupo" class="form-control">
      </div>
      <div class="col-md-3">
        <label class="form-label">Proprietário</label>
        <input type="text" name="proprietario" class="form-control">
      </div>
      <div class="col-md-3">
        <label class="form-label">Área Total (ha)</label>
        <input type="number" step="0.01" name="area_total_ha" class="form-control" required>
      </div>
      <div class="col-md-4">
        <label class="form-label">Município</label>
        <input type="text" name="municipio" class="form-control" required>
      </div>
      <div class="col-md-2">
        <label class="form-label">Estado</label>
        <input type="text" name="estado" maxlength="2" class="form-control" required>
      </div>
    </div>

    <hr class="my-4">
    <h4 class="mb-3">Pivôs Vinculados</h4>

    <div id="pivos-section">
      <div class="row g-2 align-items-end mb-2">
        <div class="col-md-4">
          <input type="text" name="pivo_nome[]" class="form-control" placeholder="Nome do Pivô" required>
        </div>
        <div class="col-md-3">
          <input type="number" name="area_ha[]" step="0.01" class="form-control" placeholder="Área (ha)" required>
        </div>
        <div class="col-md-3">
          <select name="status[]" class="form-select" required>
            <option value="">Status</option>
            <option value="ativo">Ativo</option>
            <option value="inativo">Inativo</option>
          </select>
        </div>
        <div class="col-md-2">
          <button type="button" class="btn btn-success w-100" onclick="adicionarPivo()">+</button>
        </div>
      </div>
    </div>

    <div class="mt-3">
      <button type="submit" class="btn btn-primary">Salvar Fazenda</button>
    </div>
  </form>
</div>

<script>
function adicionarPivo() {
  const container = document.getElementById("pivos-section");
  const row = document.createElement("div");
  row.className = "row g-2 align-items-end mb-2";
  row.innerHTML = `
    <div class="col-md-4">
      <input type="text" name="pivo_nome[]" class="form-control" placeholder="Nome do Pivô" required>
    </div>
    <div class="col-md-3">
      <input type="number" name="area_ha[]" step="0.01" class="form-control" placeholder="Área (ha)" required>
    </div>
    <div class="col-md-3">
      <select name="status[]" class="form-select" required>
        <option value="">Status</option>
        <option value="ativo">Ativo</option>
        <option value="inativo">Inativo</option>
      </select>
    </div>
    <div class="col-md-2">
      <span class="text-muted">Novo</span>
    </div>`;
  container.appendChild(row);
}
</script>
{% endblock %}